pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
function _init()
 p={x=30,y=60,speed=3}
 bullets={}
 chavistas={}
 create_stars()
 spawn_chavistas()
end

function _update60()
	if (btn(➡️)) p.x+=p.speed
	if (btn(⬅️)) p.x-=p.speed
	if (btn(⬆️)) p.y-=p.speed
	if (btn(⬇️)) p.y+=p.speed
	if (btnp(❎)) shoot()
	update_bullets()
	update_stars()
	if #chavistas==0 then
 	spawn_chavistas()	
 end
 update_chavistas()
 end
 //hola
 
function _draw()
 cls()
 --vzla star ship
 spr(1,p.x,p.y)
 --chavistas
 for c in all(chavistas) do
	 spr(2,c.x,c.y)
	end 
 --bullets
 for b in all(bullets) do
  spr(3,b.x,b.y)
 end
 --stars
 for s in all(stars) do
 	pset(s.x,s.y,s.col)
	end 
end



-->8
--bullets

function shoot()
 new_bullet={
		x=p.x,
		y=p.y,
		speed=3
	}
		add(bullets, new_bullet)
		sfx(0)  
end

function update_bullets()
 for i in all (bullets) do
  i.y-=i.speed
  end
end


-->8
--stars

function create_stars()
 stars={}
 for i=1,13 do
  new_star={
   x=rnd(128),
   y=rnd(128),
   col=1,
   speed=1+rnd(1)
  }
  add(stars,new_star)
 end 
 for i=1,18 do
  new_star={
   x=rnd(128),
   y=rnd(128),
   col=rnd({7,15,10,12}),
   speed=2+rnd(2)
  }
  add(stars,new_star)
 end 
end

function update_stars()
 for s in all (stars) do
	 s.y+=s.speed
	 if s.y > 128 then
	 	s.y=rnd(0,-120)
	 	s.x=rnd(120)
	 	if s.y > 128 then
	  	del(stars,c)--efface stars?
	  end	
	 end
 end
end

-->8
--chavistas

function spawn_chavistas()
	new_chavista={
		x=60,
		y=-20,
		life=3
	}
	add(chavistas,new_chavista)	 
end		 

function update_chavistas()
	for c in all(chavistas) do	
	 	c.y+=0.3
			if c.y > 128 then
	  	del(chavistas,c)
 	end
 --collide
  for b in all (bullets) do
   if collide(c,b) then
   sfx(1)
    del(bullets,c)
    c.life-=1
    if c.life==0 then
     del(chavistas,c)
    end
   end
  end
	end
end
-->8
--collide

function collide(a,b)
	if a.x>b.x+8
	or a.y>b.y+8
	or a.x+8<b.x
	or a.y+8<b.y	then
	 	return false
 	else
 	 return true
 end	
end
__gfx__
00000000000aa0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000aaaa000088888800a00a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000cc7c7c00888888000a00a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000cc7ccc7c0840404000900900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000c7ccccc70044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700088888800044444000900900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000888888880004440000c00c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000006d006d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100003e6603c66037660336602e66028660236601f6601b660186601566012660106500d6500b6500964007640056400463003630036200262001620016200061000610006100060000600006000060000600
00100000206401c6301d60018600136000e6000b60007600046000160000600006003400033000310002d0002f0002b00028000220001f0001900021000100000c00008000030001f00021000240000000000000
__music__
07 41424344

